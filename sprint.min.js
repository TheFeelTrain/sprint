<<<<<<< HEAD
/*
 * Sprint JavaScript Library v0.9.2
 * http://sprintjs.com
 *
 * Copyright (c) 2014, 2015 Benjamin De Cock
 * Released under the MIT license
 * http://sprintjs.com/license
 */
(function(){"use strict"
var t=function(t,n){for(var e=M(n),i=Object.keys(t),r=i.length,o=0;r>o;o++)for(var s=i[o],u=t[s],f=u.length,h=0;f>h;h++)e.on(s,u[h])},n=function(){var t=["animation-iteration-count","column-count","flex-grow","flex-shrink","font-weight","line-height","opacity","order","orphans","widows","z-index"]
return function(n,e){if(l(n,t))return e
var i="string"==typeof e?e:e.toString()
return e&&!/\D/.test(i)&&(i+="px"),i}}(),e=function(t,n,e){return function(i){M(i.target).closest(n,e).size()&&t.apply(i.target,arguments)}},i=function(t){var n=document.createElement("div"),e=/[\w:-]+/.exec(t)[0],i=k[e],r=t.trim()
i&&(r=i.intro+r+i.outro),n.insertAdjacentHTML("afterbegin",r)
var o=n.lastChild
if(i)for(var s=i.outro.match(/</g).length;s--;)o=o.lastChild
return n.textContent="",o},r={afterbegin:function(t){this.insertBefore(t,this.firstChild)},afterend:function(t){var n=this.parentElement
n&&n.insertBefore(t,this.nextSibling)},beforebegin:function(t){var n=this.parentElement
n&&n.insertBefore(t,this)},beforeend:function(t){this.appendChild(t)}},o=function(n,e){if(!(n.nodeType>1)){var i=f(n)
i&&t(i,e)
for(var r,o=x("*",n),s=o.length,u=0;s>u;u++){var i=f(o[u])
i&&(r||(r=x("*",e)),t(i,r[u]))}}},s=function(t,n,e,i,r){var o=[],s=this
return this.each(function(){for(var u=t?this.parentElement:this;!(!u||r&&r==u||(!i||s.is(i,u))&&(o.push(u),e)||n);)u=u.parentElement}),M(g(o))},u=function(t){return A(t)[0]},f=function(t){return t.sprintEventListeners},h=function(t,n){return Object.keys(f(t)).filter(function(t){return A(n).every(function(n){return l(n,A(t))})})},c=function(t,e,i){if(null==i){var r=t.get(0)
if(!r||r.nodeType>1&&9!=r.nodeType)return
var o=e[0].toUpperCase()+e.substring(1)
return r==document?Math.max(r.body["scroll"+o]||0,r.body["offset"+o]||0,b["scroll"+o]||0,b["offset"+o]||0):r==window?window["inner"+o]:r.getBoundingClientRect()[e]}var s="function"==typeof i,u=s?"":n(e,i)
return t.each(function(t){this==document||this==window||this.nodeType>1||(s&&(u=n(e,i.call(this,t,M(this)[e]()))),this.style[e]=u)})},a=function(t,n){var e=n.length,i=n
if(e>1&&t.indexOf("after")>-1){i=[]
for(var s=e;s--;)i.push(n[s])}for(var s=0;e>s;s++){var u=i[s]
if("string"==typeof u||"number"==typeof u)this.each(function(){this.insertAdjacentHTML(t,u)})
else{if("function"!=typeof u){var f=u instanceof S,h=[],c=function(){return f?u.get():Array.isArray(u)?T(u,!0,!0):u.nodeType?[u]:L(u)}(),l=c.length
if(this.each(function(n){for(var e=document.createDocumentFragment(),i=0;l>i;i++){var s,u=c[i]
n?(s=u.cloneNode(!0),o(u,s)):s=u,e.appendChild(s),h.push(s)}r[t].call(this,e)}),f&&(u.dom=h,u.length=h.length),e-1>s)continue
return h}this.each(function(n){var e=u.call(this,n,this.innerHTML)
a.call(M(this),t,[e])})}}},l=function(t,n){for(var e=n.length;e--;)if(n[e]===t)return!0
return!1},p=function(t){return/\./.test(t)},d=function(t,n,e){if(null==n)return"add"==t?this:this.removeAttr("class")
var i,r,o
return"string"==typeof n&&(i=!0,r=n.trim().split(" "),o=r.length),this.each(function(s,u){if(!(this.nodeType>1)){if(!i){var f=n.call(u,s,u.className)
if(!f)return
r=f.trim().split(" "),o=r.length}for(var h=0;o>h;h++){var c=r[h]
c&&(null==e?u.classList[t](c):u.classList.toggle(c,e))}}})},v=function(){for(var t=["mozMatchesSelector","webkitMatchesSelector","msMatchesSelector","matches"],n=t.length;n--;){var e=t[n]
if(Element.prototype[e])return e}}(),g=function(t){for(var n=[],e=0,i=t.length,r=0;i>r;r++){for(var o=t[r],s=!1,u=0;e>u;u++)if(o===n[u]){s=!0
break}s||(n[e++]=o)}return n},y=function(){var t=function(t,n,e){var i=Object.keys(f(t)).filter(function(t){return u(n)===u(t)}).map(function(n){return f(t)[n]}).reduce(function(t,n){return t.concat(n)}).filter(function(t){return t===e})
return i.length<2?!1:!0},n=function(n,e,i){return function(r){i&&i!==r||(n.removeEventListener(e,r),p(e)&&!t(n,e,r)&&n.removeEventListener(u(e),r))}},e=function(t,n){return t.filter(function(t){return n&&n!==t})}
return function(t,i){return function(r){f(t)[r].forEach(n(t,r,i)),f(t)[r]=e(f(t)[r],i)}}}(),m=function(t,n){return function(e){h(t,e).forEach(y(t,n))}},b=document.documentElement,T=function(t,n,e){for(var i=t.length,r=i;r--;)if(!t[r]&&0!==t[r]||n&&t[r]instanceof S||e&&("string"==typeof t[r]||"number"==typeof t[r])){for(var o=[],s=0;i>s;s++){var u=t[s]
if(u||0===u)if(n&&u instanceof S)for(var f=0;f<u.length;f++)o.push(u.get(f))
else!e||"string"!=typeof u&&"number"!=typeof u?o.push(u):o.push(document.createTextNode(u))}return o}return t},w=function(){var t
return function(n,e,i){if(!t){var r=b.scrollTop
b.scrollTop=r+1
var o=b.scrollTop
b.scrollTop=r,t=o>r?b:document.body}if(null==i){var s=n.get(0)
if(!s)return
return(s==window||s==document)&&(s=t),s[e]}return n.each(function(){var n=this;(n==window||n==document)&&(n=t),n[e]=i})}}(),C=function(t,n,e,i){var r=[],o=n+"ElementSibling"
return t.each(function(){for(var n=this;(n=n[o])&&(!i||!t.is(i,n));)(!e||t.is(e,n))&&r.push(n)}),M(g(r))},E=function(t,n,e){var i=n+"ElementSibling"
return t.map(function(){var n=this[i]
if(n&&(!e||t.is(e,n)))return n},!1)},x=function(t,n){if(n=n||document,/^[\#.]?[\w-]+$/.test(t)){var e=t[0]
if("."==e)return L(n.getElementsByClassName(t.slice(1)))
if("#"==e){var i=n.getElementById(t.slice(1))
return i?[i]:[]}return"body"==t?[document.body]:L(n.getElementsByTagName(t))}return L(n.querySelectorAll(t))},A=function(t){return T(t.split("."))},L=function(t){for(var n=[],e=t.length;e--;)n[e]=t[e]
return n},j=function(){var t=function(t,n){var e=M(t).clone(!0).get(0),i=e
if(e&&!(this.nodeType>1)){for(;i.firstChild;)i=i.firstChild
if("inner"==n){for(;this.firstChild;)i.appendChild(this.firstChild)
this.appendChild(e)}else{var r="all"==n?this.get(0):this,o=r.parentNode,s=r.nextSibling
"all"==n?this.each(function(){i.appendChild(this)}):i.appendChild(r),o.insertBefore(e,s)}}}
return function(n,e){return"function"==typeof n?this.each(function(t){M(this)["inner"==e?"wrapInner":"wrap"](n.call(this,t))}):"all"==e?t.call(this,n,e):this.each(function(){t.call(this,n,e)}),this}}(),k={legend:{intro:"<fieldset>",outro:"</fieldset>"},area:{intro:"<map>",outro:"</map>"},param:{intro:"<object>",outro:"</object>"},thead:{intro:"<table>",outro:"</table>"},tr:{intro:"<table><tbody>",outro:"</tbody></table>"},col:{intro:"<table><tbody></tbody><colgroup>",outro:"</colgroup></table>"},td:{intro:"<table><tbody><tr>",outro:"</tr></tbody></table>"}};["tbody","tfoot","colgroup","caption"].forEach(function(t){k[t]=k.thead}),k.th=k.td
var S=function(t,n){if("string"==typeof t)"<"==t[0]?this.dom=[i(t)]:this.dom=n&&n instanceof S?n.find(t).get():x(t,n)
else if(Array.isArray(t))this.dom=T(t)
else if(t instanceof NodeList||t instanceof HTMLCollection)this.dom=L(t)
else{if(t instanceof S)return t
if("function"==typeof t)return this.ready(t)
this.dom=t?[t]:[]}this.length=this.dom.length}
S.prototype={add:function(t){for(var n=this.get(),e=M(t),i=e.get(),r=0;r<e.length;r++)n.push(i[r])
return M(g(n))},addClass:function(t){return d.call(this,"add",t)},after:function(){return a.call(this,"afterend",arguments),this},append:function(){return a.call(this,"beforeend",arguments),this},appendTo:function(t){return M(a.call(M(t),"beforeend",[this]))},attr:function(t,n){var e="function"==typeof n
if("string"==typeof n||"number"==typeof n||e)return this.each(function(i){this.nodeType>1||this.setAttribute(t,e?n.call(this,i,this.getAttribute(t)):n)})
if("object"==typeof t){var i=Object.keys(t),r=i.length
return this.each(function(){if(!(this.nodeType>1))for(var n=0;r>n;n++){var e=i[n]
this.setAttribute(e,t[e])}})}var o=this.get(0)
if(o&&!(o.nodeType>1)){var s=o.getAttribute(t)
return null==s?void 0:s?s:t}},before:function(){return a.call(this,"beforebegin",arguments),this},children:function(t){var n=[],e=this
return this.each(function(){if(!(this.nodeType>1))for(var i=this.children,r=i.length,o=0;r>o;o++){var s=i[o];(!t||e.is(t,s))&&n.push(s)}}),M(n)},clone:function(t){return this.map(function(){if(this){var n=this.cloneNode(!0)
return t&&o(this,n),n}},!1)},closest:function(t,n){return s.call(this,!1,!1,!0,t,n)},css:function(t,e){var i=typeof e,r="string"==i
if(r||"number"==i){var o=r&&/=/.test(e)
if(o)var s=parseInt(e[0]+e.slice(2))
return this.each(function(){if(!(this.nodeType>1)){if(o)var i=parseInt(getComputedStyle(this).getPropertyValue(t)),r=i+s
this.style[t]=n(t,o?r:e)}})}if("function"==i)return this.each(function(n){if(!(this.nodeType>1)){var i=getComputedStyle(this).getPropertyValue(t)
this.style[t]=e.call(this,n,i)}})
if("string"==typeof t){var u=this.get(0)
if(!u||u.nodeType>1)return
return getComputedStyle(u).getPropertyValue(t)}if(Array.isArray(t)){var u=this.get(0)
if(!u||u.nodeType>1)return
for(var f={},h=getComputedStyle(u),c=t.length,a=0;c>a;a++){var l=t[a]
f[l]=h.getPropertyValue(l)}return f}var p=Object.keys(t),d=p.length
return this.each(function(){if(!(this.nodeType>1))for(var e=0;d>e;e++){var i=p[e]
this.style[i]=n(i,t[i])}})},detach:function(){return this.map(function(){var t=this.parentElement
if(t)return t.removeChild(this),this},!1)},each:function(t){for(var n=this.dom,e=this.length,i=0;e>i;i++){var r=n[i]
t.call(r,i,r)}return this},empty:function(){return this.each(function(){this.innerHTML=""})},eq:function(t){return M(this.get(t))},filter:function(t){var n="function"==typeof t,e=this
return this.map(function(i){return this.nodeType>1||!n&&!e.is(t,this)||n&&!t.call(this,i,this)?void 0:this},!1)},find:function(t){if("string"==typeof t){var n=[]
return this.each(function(){if(!(this.nodeType>1))for(var e=x(t,this),i=e.length,r=0;i>r;r++)n.push(e[r])}),M(g(n))}for(var e=t.nodeType?[t]:t.get(),i=e.length,r=[],o=0,s=0;s<this.length;s++){var u=this.get(s)
if(!(u.nodeType>1))for(var f=0;i>f;f++){var h=e[f]
if(u.contains(h)&&(r[o++]=h,!(i>o)))return M(r)}}return M(r)},first:function(){return this.eq(0)},get:function(t){return null==t?this.dom:(0>t&&(t+=this.length),this.dom[t])},has:function(t){if("string"==typeof t)return this.map(function(){return this.nodeType>1||!x(t,this)[0]?void 0:this},!1)
for(var n=[],e=this.length;e--;){var i=this.get(e)
if(i.contains(t)){n.push(i)
break}}return M(n)},hasClass:function(t){for(var n=this.length;n--;){var e=this.get(n)
if(e.nodeType>1)return
if(e.classList.contains(t))return!0}return!1},height:function(t){return c(this,"height",t)},html:function(t){if(null==t){var n=this.get(0)
if(!n)return
return n.innerHTML}return"function"==typeof t?this.each(function(n){var e=t.call(this,n,this.innerHTML)
M(this).html(e)}):this.each(function(){this.innerHTML=t})},index:function(t){if(this.length){var n,e
t?"string"==typeof t?(n=this.get(0),e=M(t)):(n=t instanceof S?t.get(0):t,e=this):(n=this.get(0),e=this.first().parent().children())
for(var i=e.get(),r=i.length;r--;)if(i[r]==n)return r
return-1}},insertAfter:function(t){return M(t).after(this),this},insertBefore:function(t){return M(t).before(this),this},is:function(t,n){var e=n?[n]:this.get(),i=e.length
if("string"==typeof t){for(var r=0;i>r;r++){var o=e[r]
if(!(o.nodeType>1)&&o[v](t))return!0}return!1}if("object"==typeof t){var s
s=t instanceof S?t.get():t.length?t:[t]
for(var u=s.length,r=0;i>r;r++)for(var f=0;u>f;f++)if(e[r]===s[f])return!0
return!1}if("function"==typeof t){for(var r=0;i>r;r++)if(t.call(this,r,this))return!0
return!1}},last:function(){return this.eq(-1)},map:function(t,n){null==n&&(n=!0)
for(var e=this.get(),i=this.length,r=[],o=0;i>o;o++){var s=e[o],u=t.call(s,o,s)
if(n&&Array.isArray(u))for(var f=u.length,h=0;f>h;h++)r.push(u[h])
else r.push(u)}return M(r)},next:function(t){return E(this,"next",t)},nextAll:function(t){return C(this,"next",t)},nextUntil:function(t,n){return C(this,"next",n,t)},not:function(t){var n="function"==typeof t,e=this
return this.map(function(i){if(n){if(t.call(this,i,this))return}else if(e.is(t,this))return
return this},!1)},off:function(t,n){return"object"==typeof t?(Object.keys(t).forEach(function(n){this.off(n,t[n])},this),this):(t&&(t=t.trim().split(" ")),this.each(function(){return f(this)?t?void t.forEach(m(this,n)):void Object.keys(f(this)).forEach(y(this)):void 0}))},offset:function(t){if(!t){var n=this.get(0)
if(!n||n.nodeType>1)return
var e=n.getBoundingClientRect()
return{top:e.top+window.pageYOffset,left:e.left+window.pageXOffset}}return"object"==typeof t?this.each(function(){if(!(this.nodeType>1)){var n=M(this)
"static"==n.css("position")?n.css("position","relative"):n.css({top:0,left:0})
var e=n.offset()
n.css({top:t.top-e.top+"px",left:t.left-e.left+"px"})}}):"function"==typeof t?this.each(function(n){var e=M(this),i=t.call(this,n,e.offset())
e.offset(i)}):void 0},offsetParent:function(){var t=[]
return this.each(function(){if(!(this.nodeType>1)){for(var n=this;n!=b;){n=n.parentNode
var e=getComputedStyle(n).getPropertyValue("position")
if(!e)break
if("static"!=e)return void t.push(n)}t.push(b)}}),M(t)},on:function(t,n,i){if("string"!=typeof n&&(i=n),i){n&&(i=e(i,n))
var r=t.trim().split(" ")
return this.each(function(){n&&(i=e(i,n,this)),f(this)||(this.sprintEventListeners={}),r.forEach(function(t){f(this)[t]||(f(this)[t]=[]),f(this)[t].push(i),this.addEventListener(t,i),p(t)&&this.addEventListener(u(t),i)},this)})}return Object.keys(t).forEach(function(n){this.on(n,t[n])},this),this},parent:function(t){return s.call(this,!0,!0,!1,t)},parents:function(t){return s.call(this,!0,!1,!1,t)},position:function(){var t={first:this.offset(),prt:this.parent().offset()}
if(t.first)return{top:t.first.top-t.prt.top,left:t.first.left-t.prt.left}},prop:function(t,n){if("object"==typeof t){var e=Object.keys(t),i=e.length
return this.each(function(){for(var n=0;i>n;n++){var r=e[n]
this[r]=t[r]}})}if(null==n){var r=this.get(0)
if(!r)return
return r[t]}var o="function"==typeof n
return this.each(function(e){this[t]=o?n.call(this,e,this[t]):n})},prepend:function(){return a.call(this,"afterbegin",arguments),this},prependTo:function(t){return M(a.call(M(t),"afterbegin",[this]))},prev:function(t){return E(this,"previous",t)},prevAll:function(t){return C(this,"previous",t)},prevUntil:function(t,n){return C(this,"previous",n,t)},ready:function(t){return this.dom=[document],this.length=1,this.on("DOMContentLoaded",t)},remove:function(t){var n=this
return this.each(function(){var e=this.parentElement
e&&(!t||n.is(t,this))&&e.removeChild(this)})},removeAttr:function(t){if(t){var n=t.trim().split(" "),e=n.length
this.each(function(){if(!(this.nodeType>1))for(var t=0;e>t;t++)this.removeAttribute(n[t])})}return this},removeClass:function(t){return d.call(this,"remove",t)},removeProp:function(t){return this.each(function(){this[t]=void 0})},replaceAll:function(t){return M(t).replaceWith(this),this},replaceWith:function(t){return"function"==typeof t?this.each(function(n){M(this).replaceWith(t.call(this,n,this))}):this.before(t).remove()},scrollLeft:function(t){return w(this,"scrollLeft",t)},scrollTop:function(t){return w(this,"scrollTop",t)},siblings:function(t){var n=[],e=this
return this.each(function(i,r){M(this).parent().children().each(function(){this==r||t&&!e.is(t,this)||n.push(this)})}),M(n)},size:function(){return this.length},slice:function(t,n){var e=this.get(),i=[],r=t>=0?t:t+this.length,o=this.length
for(0>n?o+=n:n>=0&&(o=n>this.length?this.length:n);o>r;r++)i.push(e[r])
return M(i)},text:function(t){if(null==t){var n=[]
return this.each(function(){n.push(this.textContent)}),n.join("")}var e="function"==typeof t
return this.each(function(n){this.textContent=e?t.call(this,n,this.textContent):t})},toggleClass:function(t,n){return d.call(this,"toggle",t,n)},trigger:function(t){if(!window.CustomEvent||"function"!=typeof window.CustomEvent){var n=function(t,n){var e
return n=n||{bubbles:!1,cancelable:!1,detail:void 0},e=document.createEvent("CustomEvent"),e.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),e}
n.prototype=window.Event.prototype,window.CustomEvent=n}return this.each(function(){h(this,t).forEach(function(t){this.dispatchEvent(new n(t,{bubbles:!0,cancelable:!0}))},this)})},unwrap:function(){return this.parent().each(function(){this!=document.body&&this!=b&&M(this).replaceWith(this.childNodes)}),this},val:function(t){if(null==t){var n=this.get(0)
if(!n)return
if(n.multiple){var e=[]
return this.first().children(":checked").each(function(){e.push(this.value)}),e}return n.value}if(Array.isArray(t)){var i=this
return this.each(function(){return this.multiple?void i.children().each(function(){this.selected=l(this.value,t)}):void(this.checked=l(this.value,t))})}return"function"==typeof t?this.each(function(n){M(this).val(t.call(this,n,this.value))}):this.each(function(){this.value=t})},width:function(t){return c(this,"width",t)},wrap:function(t){return j.call(this,t)},wrapAll:function(t){return j.call(this,t,"all")},wrapInner:function(t){return j.call(this,t,"inner")}}
var M=function(t,n){return new S(t,n)}
"function"==typeof define&&define.amd?define(function(){return M}):"undefined"!=typeof module&&module.exports?module.exports=M:(this.Sprint=M,null==this.$&&(this.$=M))}).call(this)
=======
var Sprint;(function(){"use strict";var addEventListeners=function(listeners,el){var sprintClone=Sprint(el);var events=Object.keys(listeners);var eventsLen=events.length;for(var i=0;i<eventsLen;i++){var event=events[i];var handlers=listeners[event];var handlersLen=handlers.length;for(var j=0;j<handlersLen;j++){sprintClone.on(event,handlers[j])}}};var addPx=function(){var noPx=["animation-iteration-count","column-count","flex-grow","flex-shrink","font-weight","line-height","opacity","order","orphans","widows","z-index"];return function addPx(cssProperty,value){if(inArray(cssProperty,noPx))return value;var stringValue=typeof value=="string"?value:value.toString();if(value&&!/\D/.test(stringValue)){stringValue+="px"}return stringValue}}();var createDelegator=function(handler,selector,context){return function(e){if(Sprint(e.target).closest(selector,context).size()){handler.apply(e.target,arguments)}}};var createDOM=function(HTMLString){var tmp=document.createElement("div");var tag=/[\w:-]+/.exec(HTMLString)[0];var inMap=wrapMap[tag];var validHTML=HTMLString.trim();if(inMap){validHTML=inMap.intro+validHTML+inMap.outro}tmp.insertAdjacentHTML("afterbegin",validHTML);var node=tmp.lastChild;if(inMap){var i=inMap.outro.match(/</g).length;while(i--){node=node.lastChild}}tmp.textContent="";return node};var domMethods={afterbegin:function(el){this.insertBefore(el,this.firstChild)},afterend:function(el){var parent=this.parentElement;parent&&parent.insertBefore(el,this.nextSibling)},beforebegin:function(el){var parent=this.parentElement;parent&&parent.insertBefore(el,this)},beforeend:function(el){this.appendChild(el)}};var duplicateEventListeners=function(el,clone){if(el.nodeType>1)return;var listeners=getEvents(el);listeners&&addEventListeners(listeners,clone);var descendants=selectElements("*",el);var descendantsLen=descendants.length;var cloneDescendants;for(var i=0;i<descendantsLen;i++){var listeners=getEvents(descendants[i]);if(!listeners)continue;if(!cloneDescendants){cloneDescendants=selectElements("*",clone)}addEventListeners(listeners,cloneDescendants[i])}};var findAncestors=function(startAtParent,limitToParent,limitToFirstMatch,selector,context){var dom=[];var self=this;this.each(function(){var prt=startAtParent?this.parentElement:this;while(prt){if(context&&context==prt)break;if(!selector||self.is(selector,prt)){dom.push(prt);if(limitToFirstMatch)break}if(limitToParent)break;prt=prt.parentElement}});return Sprint(removeDuplicates(dom))};var getEventFromNamespace=function(event){return splitNamespaces(event)[0]};var getEvents=function(domElement){return domElement.sprintEventListeners};var getEventsToRemove=function(domElement,event){return Object.keys(getEvents(domElement)).filter(function(prop){return splitNamespaces(event).every(function(name){return inArray(name,splitNamespaces(prop))})})};var getSetDimension=function(obj,prop,value){if(value==null){var el=obj.get(0);if(!el||el.nodeType>1)return;var capitalizedProp=prop[0].toUpperCase()+prop.substring(1);if(el==document){var offset=root["offset"+capitalizedProp];var inner=window["inner"+capitalizedProp];return offset>inner?offset:inner}if(el==window){return window["inner"+capitalizedProp]}return el.getBoundingClientRect()[prop]}var isFunction=typeof value=="function";var stringValue=isFunction?"":addPx(prop,value);return obj.each(function(index){if(this==document||this==window||this.nodeType>1)return;if(isFunction){stringValue=addPx(prop,value.call(this,index,Sprint(this)[prop]()))}this.style[prop]=stringValue})};var insertHTML=function(position,args){var argsLen=args.length;var contents=args;if(argsLen>1&&position.indexOf("after")>-1){contents=[];var i=argsLen;while(i--){contents.push(args[i])}}for(var i=0;i<argsLen;i++){var content=contents[i];if(typeof content=="string"||typeof content=="number"){this.each(function(){this.insertAdjacentHTML(position,content)})}else if(typeof content=="function"){this.each(function(index){var callbackValue=content.call(this,index,this.innerHTML);insertHTML.call(Sprint(this),position,[callbackValue])})}else{var isSprintObj=content instanceof Init;var clonedElements=[];var elementsToInsert=function(){if(isSprintObj){return content.get()}if(Array.isArray(content)){return sanitize(content,true,true)}if(content.nodeType){return[content]}return toArray(content)}();var elementsToInsertLen=elementsToInsert.length;this.each(function(index){var fragment=document.createDocumentFragment();for(var i=0;i<elementsToInsertLen;i++){var element=elementsToInsert[i];var elementToInsert;if(index){elementToInsert=element.cloneNode(true);duplicateEventListeners(element,elementToInsert)}else{elementToInsert=element}fragment.appendChild(elementToInsert);clonedElements.push(elementToInsert)}domMethods[position].call(this,fragment)});if(isSprintObj){content.dom=clonedElements;content.length=clonedElements.length}if(i<argsLen-1)continue;return clonedElements}}};var inArray=function(el,arr){var i=arr.length;while(i--){if(arr[i]===el)return true}return false};var isNamespaced=function(event){return/\./.test(event)};var manipulateClass=function(method,className,bool){if(className==null){if(method=="add"){return this}return this.removeAttr("class")}var isString;var classNames;var classNamesLen;if(typeof className=="string"){isString=true;classNames=className.trim().split(" ");classNamesLen=classNames.length}return this.each(function(i,el){if(this.nodeType>1)return;if(!isString){var callbackValue=className.call(el,i,el.className);if(!callbackValue)return;classNames=callbackValue.trim().split(" ");classNamesLen=classNames.length}for(var j=0;j<classNamesLen;j++){var name=classNames[j];if(!name)continue;bool==null?el.classList[method](name):el.classList.toggle(name,bool)}})};var matches=function(){var names=["mozMatchesSelector","webkitMatchesSelector","msMatchesSelector","matches"];var i=names.length;while(i--){var name=names[i];if(!Element.prototype[name])continue;return name}}();var removeDuplicates=function(arr){var clean=[];var cleanLen=0;var arrLen=arr.length;for(var i=0;i<arrLen;i++){var el=arr[i];var duplicate=false;for(var j=0;j<cleanLen;j++){if(el!==clean[j])continue;duplicate=true;break}if(duplicate)continue;clean[cleanLen++]=el}return clean};var removeEvent=function(){var isHandlerShared=function(el,event,registeredHandler){var similarEventsHandlers=Object.keys(getEvents(el)).filter(function(prop){return getEventFromNamespace(event)===getEventFromNamespace(prop)}).map(function(ev){return getEvents(el)[ev]}).reduce(function(a,b){return a.concat(b)}).filter(function(handler){return handler===registeredHandler});if(similarEventsHandlers.length<2)return false;return true};var removeListener=function(el,event,namedHandler){return function(registeredHandler){if(namedHandler&&namedHandler!==registeredHandler)return;el.removeEventListener(event,registeredHandler);if(!isNamespaced(event)||isHandlerShared(el,event,registeredHandler))return;el.removeEventListener(getEventFromNamespace(event),registeredHandler)}};var clearRegisteredHandlers=function(registeredHandlers,namedHandler){return registeredHandlers.filter(function(handler){return namedHandler&&namedHandler!==handler})};return function(el,namedHandler){return function(event){getEvents(el)[event].forEach(removeListener(el,event,namedHandler));getEvents(el)[event]=clearRegisteredHandlers(getEvents(el)[event],namedHandler)}}}();var removeMatchedEvents=function(el,namedHandler){return function(event){getEventsToRemove(el,event).forEach(removeEvent(el,namedHandler))}};var root=document.documentElement;var sanitize=function(arr,flattenObjects,requireDomNodes){var arrLen=arr.length;var i=arrLen;while(i--){if(!arr[i]&&arr[i]!==0||flattenObjects&&arr[i]instanceof Init||requireDomNodes&&(typeof arr[i]=="string"||typeof arr[i]=="number")){var sanitized=[];for(var j=0;j<arrLen;j++){var el=arr[j];if(!el&&el!==0)continue;if(flattenObjects&&el instanceof Init){for(var k=0;k<el.length;k++){sanitized.push(el.get(k))}continue}if(requireDomNodes&&(typeof el=="string"||typeof el=="number")){sanitized.push(document.createTextNode(el));continue}sanitized.push(el)}return sanitized}}return arr};var scroll=function(){var scrollRoot;return function(sprintObj,method,value){if(!scrollRoot){var initialScrollPos=root.scrollTop;root.scrollTop=initialScrollPos+1;var updatedScrollPos=root.scrollTop;root.scrollTop=initialScrollPos;scrollRoot=updatedScrollPos>initialScrollPos?root:document.body}if(value==null){var el=sprintObj.get(0);if(!el)return;if(el==window||el==document){el=scrollRoot}return el[method]}return sprintObj.each(function(){var el=this;if(el==window||el==document){el=scrollRoot}el[method]=value})}}();var selectAdjacentSiblings=function(sprintObj,direction,selector,until){var dom=[];var prop=direction+"ElementSibling";sprintObj.each(function(){var el=this;while(el=el[prop]){if(until&&sprintObj.is(until,el))break;if(selector&&!sprintObj.is(selector,el))continue;dom.push(el)}});return Sprint(removeDuplicates(dom))};var selectImmediateAdjacentSibling=function(sprintObj,direction,selector){var prop=direction+"ElementSibling";return sprintObj.map(function(){var el=this[prop];if(!el||selector&&!sprintObj.is(selector,el))return;return el},false)};var selectElements=function(selector,context){context=context||document;if(/^[\#.]?[\w-]+$/.test(selector)){var firstChar=selector[0];if(firstChar=="."){return toArray(context.getElementsByClassName(selector.slice(1)))}if(firstChar=="#"){var el=context.getElementById(selector.slice(1));return el?[el]:[]}if(selector=="body"){return[document.body]}return toArray(context.getElementsByTagName(selector))}return toArray(context.querySelectorAll(selector))};var splitNamespaces=function(event){return sanitize(event.split("."))};var toArray=function(obj){var arr=[];var i=obj.length;while(i--){arr[i]=obj[i]}return arr};var wrap=function(){var callback=function(wrappingElement,variant){var wrap=Sprint(wrappingElement).clone(true).get(0);var innerWrap=wrap;if(!wrap||this.nodeType>1)return;while(innerWrap.firstChild){innerWrap=innerWrap.firstChild}if(variant=="inner"){while(this.firstChild){innerWrap.appendChild(this.firstChild)}this.appendChild(wrap)}else{var el=variant=="all"?this.get(0):this;var prt=el.parentNode;var next=el.nextSibling;variant=="all"?this.each(function(){innerWrap.appendChild(this)}):innerWrap.appendChild(el);prt.insertBefore(wrap,next)}};return function(wrappingElement,variant){if(typeof wrappingElement=="function"){this.each(function(i){Sprint(this)[variant=="inner"?"wrapInner":"wrap"](wrappingElement.call(this,i))})}else{variant=="all"?callback.call(this,wrappingElement,variant):this.each(function(){callback.call(this,wrappingElement,variant)})}return this}}();var wrapMap={legend:{intro:"<fieldset>",outro:"</fieldset>"},area:{intro:"<map>",outro:"</map>"},param:{intro:"<object>",outro:"</object>"},thead:{intro:"<table>",outro:"</table>"},tr:{intro:"<table><tbody>",outro:"</tbody></table>"},col:{intro:"<table><tbody></tbody><colgroup>",outro:"</colgroup></table>"},td:{intro:"<table><tbody><tr>",outro:"</tr></tbody></table>"}};["tbody","tfoot","colgroup","caption"].forEach(function(tag){wrapMap[tag]=wrapMap.thead});wrapMap.th=wrapMap.td;var Init=function(selector,context){if(typeof selector=="string"){if(selector[0]=="<"){this.dom=[createDOM(selector)]}else{this.dom=context&&context instanceof Init?context.find(selector).get():selectElements(selector,context)}}else if(Array.isArray(selector)){this.dom=sanitize(selector)}else if(selector instanceof NodeList||selector instanceof HTMLCollection){this.dom=toArray(selector)}else if(selector instanceof Init){return selector}else if(typeof selector=="function"){return this.ready(selector)}else{this.dom=selector?[selector]:[]}this.length=this.dom.length};Init.prototype={add:function(selector){var dom=this.get();var objToAdd=Sprint(selector);var domToAdd=objToAdd.get();for(var i=0;i<objToAdd.length;i++){dom.push(domToAdd[i])}return Sprint(removeDuplicates(dom))},addClass:function(className){return manipulateClass.call(this,"add",className)},after:function(){insertHTML.call(this,"afterend",arguments);return this},append:function(){insertHTML.call(this,"beforeend",arguments);return this},appendTo:function(target){return Sprint(insertHTML.call(Sprint(target),"beforeend",[this]))},attr:function(name,value){var isFunc=typeof value=="function";if(typeof value=="string"||typeof value=="number"||isFunc){return this.each(function(i){if(this.nodeType>1)return;this.setAttribute(name,isFunc?value.call(this,i,this.getAttribute(name)):value)})}if(typeof name=="object"){var attrNames=Object.keys(name);var attrNamesLen=attrNames.length;return this.each(function(){if(this.nodeType>1)return;for(var i=0;i<attrNamesLen;i++){var attribute=attrNames[i];this.setAttribute(attribute,name[attribute])}})}var el=this.get(0);if(!el||el.nodeType>1)return;var attrValue=el.getAttribute(name);if(attrValue==null){return undefined}if(!attrValue){return name}return attrValue},before:function(){insertHTML.call(this,"beforebegin",arguments);return this},children:function(selector){var dom=[];var self=this;this.each(function(){if(this.nodeType>1)return;var nodes=this.children;var nodesLen=nodes.length;for(var i=0;i<nodesLen;i++){var node=nodes[i];if(!selector||self.is(selector,node)){dom.push(node)}}});return Sprint(dom)},clone:function(withEvents){return this.map(function(){if(!this)return;var clone=this.cloneNode(true);withEvents&&duplicateEventListeners(this,clone);return clone},false)},closest:function(selector,context){return findAncestors.call(this,false,false,true,selector,context)},css:function(property,value){var valueType=typeof value;var isString=valueType=="string";if(isString||valueType=="number"){var isRelativeValue=isString&&/=/.test(value);if(isRelativeValue){var relativeValue=parseInt(value[0]+value.slice(2))}return this.each(function(){if(this.nodeType>1)return;if(isRelativeValue){var current=parseInt(getComputedStyle(this).getPropertyValue(property));var result=current+relativeValue}this.style[property]=addPx(property,isRelativeValue?result:value)})}if(valueType=="function"){return this.each(function(index){if(this.nodeType>1)return;var oldValue=getComputedStyle(this).getPropertyValue(property);this.style[property]=value.call(this,index,oldValue)})}if(typeof property=="string"){var el=this.get(0);if(!el||el.nodeType>1)return;return getComputedStyle(el).getPropertyValue(property)}if(Array.isArray(property)){var el=this.get(0);if(!el||el.nodeType>1)return;var o={};var styles=getComputedStyle(el);var propertyLen=property.length;for(var i=0;i<propertyLen;i++){var prop=property[i];o[prop]=styles.getPropertyValue(prop)}return o}var properties=Object.keys(property);var propertiesLen=properties.length;return this.each(function(){if(this.nodeType>1)return;for(var i=0;i<propertiesLen;i++){var prop=properties[i];this.style[prop]=addPx(prop,property[prop])}})},detach:function(){return this.map(function(){var parent=this.parentElement;if(!parent)return;parent.removeChild(this);return this},false)},each:function(callback){var dom=this.dom;var len=this.length;for(var i=0;i<len;i++){var node=dom[i];callback.call(node,i,node)}return this},empty:function(){return this.each(function(){this.innerHTML=""})},eq:function(index){return Sprint(this.get(index))},filter:function(selector){var isFunc=typeof selector=="function";var self=this;return this.map(function(i){if(this.nodeType>1||!isFunc&&!self.is(selector,this)||isFunc&&!selector.call(this,i,this))return;return this},false)},find:function(selector){if(typeof selector=="string"){var dom=[];this.each(function(){if(this.nodeType>1)return;var elements=selectElements(selector,this);var elementsLen=elements.length;for(var i=0;i<elementsLen;i++){dom.push(elements[i])}});return Sprint(removeDuplicates(dom))}var elementsToFind=selector.nodeType?[selector]:selector.get();var elementsToFindLen=elementsToFind.length;var elementsFound=[];var elementsFoundLen=0;for(var i=0;i<this.length;i++){var el=this.get(i);if(el.nodeType>1)continue;for(var j=0;j<elementsToFindLen;j++){var elementToFind=elementsToFind[j];if(!el.contains(elementToFind))continue;elementsFound[elementsFoundLen++]=elementToFind;if(elementsFoundLen<elementsToFindLen)continue;return Sprint(elementsFound)}}return Sprint(elementsFound)},first:function(){return this.eq(0)},get:function(index){if(index==null){return this.dom}if(index<0){index+=this.length}return this.dom[index]},has:function(selector){if(typeof selector=="string"){return this.map(function(){if(this.nodeType>1||!selectElements(selector,this)[0])return;return this},false)}var result=[];var i=this.length;while(i--){var el=this.get(i);if(!el.contains(selector))continue;result.push(el);break}return Sprint(result)},hasClass:function(name){var i=this.length;while(i--){var el=this.get(i);if(el.nodeType>1)return;if(el.classList.contains(name)){return true}}return false},height:function(value){return getSetDimension(this,"height",value)},html:function(htmlString){if(htmlString==null){var el=this.get(0);if(!el)return;return el.innerHTML}if(typeof htmlString=="function"){return this.each(function(i){var content=htmlString.call(this,i,this.innerHTML);Sprint(this).html(content)})}return this.each(function(){this.innerHTML=htmlString})},index:function(el){if(!this.length)return;var toFind;var sprintElements;if(!el){toFind=this.get(0);sprintElements=this.first().parent().children()}else if(typeof el=="string"){toFind=this.get(0);sprintElements=Sprint(el)}else{toFind=el instanceof Init?el.get(0):el;sprintElements=this}var elements=sprintElements.get();var i=elements.length;while(i--){if(elements[i]==toFind){return i}}return-1},insertAfter:function(target){Sprint(target).after(this);return this},insertBefore:function(target){Sprint(target).before(this);return this},is:function(selector,element){var set=element?[element]:this.get();var setLen=set.length;if(typeof selector=="string"){for(var i=0;i<setLen;i++){var el=set[i];if(el.nodeType>1)continue;if(el[matches](selector)){return true}}return false}if(typeof selector=="object"){var obj;if(selector instanceof Init){obj=selector.get()}else{obj=selector.length?selector:[selector]}var objLen=obj.length;for(var i=0;i<setLen;i++){for(var j=0;j<objLen;j++){if(set[i]===obj[j]){return true}}}return false}if(typeof selector=="function"){for(var i=0;i<setLen;i++){if(selector.call(this,i,this)){return true}}return false}},last:function(){return this.eq(-1)},map:function(callback,flattenArrays){if(flattenArrays==null){flattenArrays=true}var dom=this.get();var len=this.length;var values=[];for(var i=0;i<len;i++){var el=dom[i];var val=callback.call(el,i,el);if(flattenArrays&&Array.isArray(val)){var valLen=val.length;for(var j=0;j<valLen;j++){values.push(val[j])}continue}values.push(val)}return Sprint(values)},next:function(selector){return selectImmediateAdjacentSibling(this,"next",selector)},nextAll:function(selector){return selectAdjacentSiblings(this,"next",selector)},nextUntil:function(selector,filter){return selectAdjacentSiblings(this,"next",filter,selector)},not:function(selector){var isFunc=typeof selector=="function";var self=this;return this.map(function(i){if(isFunc){if(selector.call(this,i,this))return}else{if(self.is(selector,this))return}return this},false)},off:function(events,handler){if(typeof events=="object"){Object.keys(events).forEach(function(event){this.off(event,events[event])},this);return this}if(events){events=events.trim().split(" ")}return this.each(function(){if(!getEvents(this))return;if(events){events.forEach(removeMatchedEvents(this,handler));return}Object.keys(getEvents(this)).forEach(removeEvent(this))})},offset:function(coordinates){if(!coordinates){var el=this.get(0);if(!el||el.nodeType>1)return;var pos=el.getBoundingClientRect();return{top:pos.top,left:pos.left}}if(typeof coordinates=="object"){return this.each(function(){if(this.nodeType>1)return;var $this=Sprint(this);$this.css("position")=="static"?$this.css("position","relative"):$this.css({top:0,left:0});var pos=$this.offset();$this.css({top:coordinates.top-pos.top+"px",left:coordinates.left-pos.left+"px"})})}if(typeof coordinates=="function"){return this.each(function(i){var $this=Sprint(this);var posObj=coordinates.call(this,i,$this.offset());$this.offset(posObj)})}},offsetParent:function(){var dom=[];this.each(function(){if(this.nodeType>1)return;var prt=this;while(prt!=root){prt=prt.parentNode;var pos=getComputedStyle(prt).getPropertyValue("position");if(!pos)break;if(pos!="static"){dom.push(prt);return}}dom.push(root)});return Sprint(dom)},on:function(events,selector,handler){if(typeof selector!=="string"){handler=selector;selector=null}if(handler){var eventsArr=events.trim().split(" ");return this.each(function(){if(selector){handler=createDelegator(handler,selector,this)}if(!getEvents(this)){this.sprintEventListeners={}}eventsArr.forEach(function(event){if(!getEvents(this)[event]){getEvents(this)[event]=[]}getEvents(this)[event].push(handler);this.addEventListener(event,handler);if(!isNamespaced(event))return;this.addEventListener(getEventFromNamespace(event),handler)},this)})}Object.keys(events).forEach(function(event){this.on(event,events[event])},this);return this},parent:function(selector){return findAncestors.call(this,true,true,false,selector)},parents:function(selector){return findAncestors.call(this,true,false,false,selector)},position:function(){var pos={first:this.offset(),prt:this.parent().offset()};if(!pos.first)return;return{top:pos.first.top-pos.prt.top,left:pos.first.left-pos.prt.left}},prop:function(propertyName,value){if(typeof propertyName=="object"){var props=Object.keys(propertyName);var propsLen=props.length;return this.each(function(){for(var i=0;i<propsLen;i++){var prop=props[i];this[prop]=propertyName[prop]}})}if(value==null){var el=this.get(0);if(!el)return;return el[propertyName]}var isFunc=typeof value=="function";return this.each(function(i){this[propertyName]=isFunc?value.call(this,i,this[propertyName]):value})},prepend:function(){insertHTML.call(this,"afterbegin",arguments);return this},prependTo:function(target){return Sprint(insertHTML.call(Sprint(target),"afterbegin",[this]))},prev:function(selector){return selectImmediateAdjacentSibling(this,"previous",selector)},prevAll:function(selector){return selectAdjacentSiblings(this,"previous",selector)},prevUntil:function(selector,filter){return selectAdjacentSiblings(this,"previous",filter,selector)},ready:function(handler){this.dom=[document];this.length=1;return this.on("DOMContentLoaded",handler)},remove:function(selector){var self=this;return this.each(function(){var parent=this.parentElement;if(!parent)return;if(!selector||self.is(selector,this)){parent.removeChild(this)}})},removeAttr:function(attributeName){if(attributeName){var attributes=attributeName.trim().split(" ");var attributesLen=attributes.length;this.each(function(){if(this.nodeType>1)return;for(var i=0;i<attributesLen;i++){this.removeAttribute(attributes[i])}})}return this},removeClass:function(className){return manipulateClass.call(this,"remove",className)},removeProp:function(propertyName){return this.each(function(){this[propertyName]=undefined})},replaceAll:function(target){Sprint(target).replaceWith(this);return this},replaceWith:function(newContent){if(typeof newContent=="function"){return this.each(function(i){Sprint(this).replaceWith(newContent.call(this,i,this))})}return this.before(newContent).remove()},scrollLeft:function(value){return scroll(this,"scrollLeft",value)},scrollTop:function(value){return scroll(this,"scrollTop",value)},siblings:function(selector){var siblings=[];var self=this;this.each(function(i,el){Sprint(this).parent().children().each(function(){if(this==el||selector&&!self.is(selector,this))return;siblings.push(this)})});return Sprint(siblings)},size:function(){return this.length},slice:function(start,end){var dom=this.get();var range=[];var i=start>=0?start:start+this.length;var l=this.length;if(end<0){l+=end}else if(end>=0){l=end>this.length?this.length:end}for(;i<l;i++){range.push(dom[i])}return Sprint(range)},text:function(content){if(content==null){var textContents=[];this.each(function(){textContents.push(this.textContent)});return textContents.join("")}var isFunc=typeof content=="function";return this.each(function(i){this.textContent=isFunc?content.call(this,i,this.textContent):content})},toggleClass:function(className,bool){return manipulateClass.call(this,"toggle",className,bool)},trigger:function(event){if(!window.CustomEvent||typeof window.CustomEvent!=="function"){var CustomEvent=function(event,params){var evt;params=params||{bubbles:false,cancelable:false,detail:undefined};evt=document.createEvent("CustomEvent");evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);return evt};CustomEvent.prototype=window.Event.prototype;window.CustomEvent=CustomEvent}return this.each(function(){getEventsToRemove(this,event).forEach(function(matchedEvent){this.dispatchEvent(new CustomEvent(matchedEvent,{bubbles:true,cancelable:true}))},this)})},unwrap:function(){this.parent().each(function(){if(this==document.body||this==root)return;Sprint(this).replaceWith(this.childNodes)});return this},val:function(value){if(value==null){var el=this.get(0);if(!el)return;if(el.multiple){var values=[];this.first().children(":checked").each(function(){values.push(this.value)});return values}return el.value}if(Array.isArray(value)){var self=this;return this.each(function(){if(this.multiple){self.children().each(function(){this.selected=inArray(this.value,value)});return}this.checked=inArray(this.value,value)})}if(typeof value=="function"){return this.each(function(i){Sprint(this).val(value.call(this,i,this.value))})}return this.each(function(){this.value=value})},width:function(value){return getSetDimension(this,"width",value)},wrap:function(wrappingElement){return wrap.call(this,wrappingElement)},wrapAll:function(wrappingElement){return wrap.call(this,wrappingElement,"all")},wrapInner:function(wrappingElement){return wrap.call(this,wrappingElement,"inner")}};Sprint=function(selector,context){return new Init(selector,context)};if(window.$==null){window.$=Sprint}})();
>>>>>>> clear selector if it's not a string
